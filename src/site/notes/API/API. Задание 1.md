---
{"dg-publish":true,"permalink":"/api/api-zadanie-1/","tags":["gardenEntry"]}
---


## Задание 1. Постановка задачи на разработку strapi

---

**ФИО:** {{ 2022-ФГиИБ-ИБ-1б }} {{ Максимельянов Илья Максимович }}

---
### Идея

Приложение (сайт) для автозаправки, с помощью которого можно:
- Копить баллы по системе лояльности
- Смотреть где находится ближайшая заправка
- Смотреть виды топлива и цены для них
- Посмотреть фотографии заправки
- Оставить комментарии и оценить работу конкретной 

### Сущности

###### Сущность 1 - Пользователь

Пользователь - это человек (сущность), который зарегистрирован в приложении и имеет доступ к определённым функциям (система лояльности, оплата в приложении) и данным (отзывы к заправкам сети и франшизы).

| Набор полей                        | Тип данных | Пример                                      |
| ---------------------------------- | ---------- | ------------------------------------------- |
| Идентификатор (id)                 | int        | 100001                                      |
| Имя (name)                         | string     | "Илья"                                      |
| Почта (email)                      | string     | "ilya@mail.ru"                              |
| Роль (role)                        | string     | "advanced"                                  |
| Пароль (password)                  | string     | "$FHzFXaVRyz2oymZ8Gw$3.PGq2CrzPTB+3BnsfX4l" |
| Дата регистрации (regdate)         | datetime   | 2022-05-15 12:30:00                         |
| Оставленные отзывы (givenfeedback) | array      | [500001, 500002]                            |
| Уровень лояльности (loyaltylvl)    | string     | "brilliant"                                 |
| Баллы (score)                      | int        | 253                                         |
###### Сущность 2 - Заправка

Заправка - сущность, которая хранит в себе информацию о топливораздаточных колонках (ТРК), адрес и отзывы

| Набор полей        | Тип данных | Пример                                                    |
| ------------------ | ---------- | --------------------------------------------------------- |
| Идентификатор (id) | int        | 200001                                                    |
| Адрес (adress)     | string     | "Проспект Ильича, 96, Шатура, Московская область, 140703" |
| ТРК (fueldesp)     | array      | [300001, 300002]                                          |
| Отзывы (feedback)  | array      | [500001, 500002]                                          |
| Фотография (photo) | image      | ![Pasted image 20240908183104.png](/img/user/media/Pasted%20image%2020240908183104.png)                      |
###### Сущность 3 - ТРК

ТРК - вложенная сущность, которая хранит в себе информацию о топливе и дату последнего обслуживания

| Набор полей              | Тип данных | Пример              |
| ------------------------ | ---------- | ------------------- |
| Идентификатор (id)       | int        | 300001              |
| Топливо (fuel)           | array      | [400001, 400002]    |
| Дата обслуживания (date) | datetime   | 2022-05-15 12:40:00 |
###### Сущность 4 - Топливо

Топливо - вложенная сущность, хранящая в себе данные о названии и цене

| Набор полей          | Тип данных | Пример  |
| -------------------- | ---------- | ------- |
| Идентификатор (id)   | int        | 400001  |
| Название (name)      | string     | "АИ-95" |
| Цена за литр (price) | string     | "54,95" |
###### Сущность 5 - Отзыв

Отзыв -  вложенная сущность, которая хранит информацию о заправке, пользователе и тексте

| Набор полей           | Тип данных | Пример                                                |
| --------------------- | ---------- | ----------------------------------------------------- |
| Идентификатор (id)    | int        | 500001                                                |
| Пользователь (userid) | int        | 100001                                                |
| Заправка (stationid)  | int        | 200001                                                |
| Текст (text)          | string     | "Хорошая заправка. Всё чисто и качественное топливо!" |
#### Роли

Существует две роли:
- Пользователь
Представляет собой дефолтную роль, без особых бонусов с базовыми возможностями описанными в сущности пользователь.
- Персонал
Представляет собой роль, которые могут получить сотрудники автозаправки, которая позволяет получить дополнительные возможности системы лояльности и возможность обновлять дату обслуживания ТРК, добавлять и редактировать фото заправки, модерировать отзывы пользователей.
#### Отношения между сущностями

В виде схемы  
![ER.png](/img/user/media/ER.png)

### Источники данных

Медиа являются фотографии автомобильных заправок, сделанные пользователями или персоналом

### Порядок доступа к данным

Без регистрации пользователь может просматривать данные о заправках, видеть отзывы, но не может расплачиваться и оставлять отзывы сам.
Зарегистрированный пользователь может всё, кроме обновления данных ТРК.
Пользователь с ролью 
### Верификация

При регистрации пользователя проверяется, является ли номер телефона цифрами, есть ли в строчке почты домен.
При загрузке фотографии заправки проверяется, является ли она изображением с форматом .jpg, .png, .jpeg
### Аутентификация

При входе, пользователь, вводит свой номер телефона и ему, если пользователь с таким номером существует, отправляется код, который он должен ввести в течении двух минут
### Особые указания, требования, комментарии
Не имею